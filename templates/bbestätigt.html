<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Buchung erfasst</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="style.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

<header>
    <a href="{{ url_for('index') }}">
        <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo">
    </a>
    <h1>cour+</h1>
    <p>Tennisplatz-Buchungssystem</p>
</header>

<div class="success-box">
    <div class="success-icon">âœ“</div>
    <h1>Buchung erfasst</h1>
    
    <div class="info-box">
        <div class="info-row">
            <span class="info-label">Buchungsnummer:</span>
            <span class="info-value"><strong>{{ buchungsnummer }}</strong></span>
        </div>
        
        <div class="info-row">
            <span class="info-label">Name:</span>
            <span class="info-value">{{ vorname }} {{ nachname }}</span>
        </div>
        
        <div class="info-row">
            <span class="info-label">Nutzer-ID:</span>
            <span class="info-value">{{ nid }}</span>
        </div>
    </div>
    
    <div class="buttons">
        <button onclick="generatePDF()" class="btn">ðŸ“„ PDF herunterladen</button>
        <a href="{{ url_for('buchen') }}" class="btn">Weitere Buchung</a>
        <a href="{{ url_for('index') }}" class="btn">Zur Startseite</a>
    </div>
</div>

<script>
function generatePDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    
    doc.setTextColor(0, 0, 0);
    doc.setFontSize(20);
    doc.setFont(undefined, 'bold');
    doc.text('cour+', 105, 25, { align: 'center' });
    
    doc.setFontSize(10);
    doc.setFont(undefined, 'normal');
    doc.text('Tennisplatz-Buchungssystem', 105, 32, { align: 'center' });
    
    doc.setDrawColor(200, 200, 200);
    doc.line(20, 38, 190, 38);
    
    doc.setFontSize(16);
    doc.setFont(undefined, 'bold');
    doc.text('BuchungsbestÃ¤tigung', 20, 50);
    
    doc.setFontSize(11);
    doc.text('Buchungsnummer: ' + '{{ buchungsnummer }}', 20, 58);
    
    doc.setFontSize(10);
    doc.setFont(undefined, 'normal');
    
    let y = 73;
    const lineHeight = 7;
    
    doc.setFont(undefined, 'bold');
    doc.text('Personalien', 20, y);
    y += lineHeight + 2;
    doc.setFont(undefined, 'normal');
    
    doc.text('Name:', 25, y);
    doc.text('{{ vorname }} {{ nachname }}', 75, y);
    y += lineHeight;
    
    doc.text('Nutzer-ID:', 25, y);
    doc.text('{{ nid }}', 75, y);
    y += lineHeight;
    
    doc.text('E-Mail:', 25, y);
    doc.text('{{ email }}', 75, y);
    y += lineHeight;
    
    {% if geburtsdatum_formatiert %}
    doc.text('Geburtsdatum:', 25, y);
    doc.text('{{ geburtsdatum_formatiert }}', 75, y);
    y += lineHeight;
    {% endif %}
    
    y += lineHeight;
    
    doc.setFont(undefined, 'bold');
    doc.text('Buchungsdetails', 20, y);
    y += lineHeight + 2;
    doc.setFont(undefined, 'normal');
    
    doc.text('Tennisanlage:', 25, y);
    doc.text('{{ tennisanlage }}', 75, y);
    y += lineHeight;
    
    doc.text('Platznummer:', 25, y);
    doc.text('Platz {{ platznummer }}', 75, y);
    y += lineHeight;
    
    doc.text('Spieldatum:', 25, y);
    doc.text('{{ spieldatum_formatiert }}', 75, y);
    y += lineHeight;
    
    doc.text('Spielzeit:', 25, y);
    doc.text('{{ spielbeginn_formatiert }} - {{ spielende_formatiert }} Uhr', 75, y);
    y += lineHeight + lineHeight;
    
    doc.setFont(undefined, 'bold');
    doc.text('Zeitpunkt der Buchung', 20, y);
    y += lineHeight + 2;
    doc.setFont(undefined, 'normal');
    doc.text('{{ buchungszeitpunkt }}', 25, y);
    
    doc.setFontSize(8);
    doc.setTextColor(100, 100, 100);
    doc.text('Tennisverein Musterstadt Â· MusterstraÃŸe 1 Â· 12345 Musterstadt', 105, 280, { align: 'center' });
    
    doc.save('Buchungsbestaetigung_{{ buchungsnummer }}.pdf');
}
</script>

</body>
</html>
